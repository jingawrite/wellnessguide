import { useState } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { Card, CardContent, CardHeader, CardTitle } from '../../components/ui/card';
import { Button } from '../../components/ui/button';
import { Progress } from '../../components/ui/progress';
import { Checkbox } from '../../components/ui/checkbox';
import { Label } from '../../components/ui/label';
import { BookOpen, Clock, FileText, ArrowRight, ArrowLeft, StickyNote } from 'lucide-react';
import {
  Sidebar,
  SidebarContent,
  SidebarGroup,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarMenu,
  SidebarMenuButton,
  SidebarMenuItem,
} from '../../components/ui/sidebar';

const chapters = [
  {
    id: 0,
    title: '오프닝',
    sections: [
      { id: '0-1', title: '강의 소개 및 목표', completed: false },
    ],
  },
  {
    id: 1,
    title: '콘텐츠 마케팅 직무란?',
    sections: [
      { id: '1-1', title: '콘텐츠 마케팅의 정의와 역할', completed: false },
      { id: '1-2', title: '콘텐츠 마케터의 주요 업무', completed: false },
      { id: '1-3', title: '협업하는 팀', completed: false },
      { id: '1-4', title: '실습/과제', completed: false },
    ],
  },
  {
    id: 2,
    title: '콘텐츠 마케팅 전략 수립',
    sections: [
      { id: '2-1', title: '비즈니스 목표와 마케팅 목표 연결', completed: false },
      { id: '2-2', title: '타겟 정의와 페르소나', completed: false },
      { id: '2-3', title: '인사이트 도출을 위한 조사 방법', completed: false },
      { id: '2-4', title: '기본 전략 프레임', completed: false },
      { id: '2-5', title: '실습/과제', completed: false },
    ],
  },
  {
    id: 3,
    title: '콘텐츠 기획과 제작',
    sections: [
      { id: '3-1', title: '콘텐츠 카테고리 설계', completed: false },
      { id: '3-2', title: '포맷별 기획 포인트', completed: false },
      { id: '3-3', title: '콘텐츠 브리프 작성법', completed: false },
      { id: '3-4', title: '제작 프로세스와 툴', completed: false },
      { id: '3-5', title: '실습/과제', completed: false },
    ],
  },
  {
    id: 4,
    title: '채널 운영',
    sections: [
      { id: '4-1', title: '주요 채널별 역할 정의', completed: false },
      { id: '4-2', title: '채널 운영 전략', completed: false },
      { id: '4-3', title: '콘텐츠 캘린더 운영', completed: false },
      { id: '4-4', title: '실무 문제와 해결 팁', completed: false },
      { id: '4-5', title: '실습/과제', completed: false },
    ],
  },
  {
    id: 5,
    title: '캠페인 기획',
    sections: [
      { id: '5-1', title: '캠페인의 정의와 필수 요소', completed: false },
      { id: '5-2', title: '캠페인 구조 설계', completed: false },
      { id: '5-3', title: '사례 분석', completed: false },
      { id: '5-4', title: '실습/과제', completed: false },
    ],
  },
  {
    id: 6,
    title: '콘텐츠 마케팅 실무 팁',
    sections: [
      { id: '6-1', title: '실무 리포트 작성법', completed: false },
      { id: '6-2', title: '협업 커뮤니케이션 팁', completed: false },
      { id: '6-3', title: '커리어·역량 개발 방향', completed: false },
    ],
  },
];

const appendix = [
  { id: 'app-1', title: '실무 도움 키트' },
  { id: 'app-2', title: '스레드 운영법' },
  { id: 'app-3', title: '지표/대시보드 설명' },
  { id: 'app-4', title: '템플릿 모음' },
  { id: 'app-5', title: '트렌드 모음' },
];

// 챕터별 상세 콘텐츠 데이터
const sectionContent: Record<string, any> = {
  '0-1': {
    title: '강의 소개 및 목표',
    time: '10-15분',
    content: `
# 오프닝: 강의 소개 및 목표

## 아이스브레이크

강의 시작 전, 다음 질문들을 통해 서로의 경험을 공유해봅시다.

### 질문 예시
- "요즘 가장 많이 보는 브랜드 콘텐츠는 무엇인가요?"
- "최근에 '이 광고/콘텐츠 때문에 샀다' 경험 있으신가요?"

2~3명이 짧게 공유한 후, 강사가 채널·형식(숏폼, 라이브, 뉴스레터 등)으로 묶어 정리합니다.

## 강의 목표

이 강의에서 다루는 것은 **예쁜 콘텐츠 만들기**가 아니라

**'비즈니스 목표를 움직이는 콘텐츠'를 설계하는 방법**입니다.

## 운영 방식 안내

- 강의 60-70% + 사례·질문 30-40%
- 실습/과제 제출 방식 안내 (PPT/PDF, 분량, 마감, 제출 채널 등)

## 커리큘럼 소개

1장: 콘텐츠 마케팅 직무란?
2장: 콘텐츠 마케팅 전략 수립
3장: 콘텐츠 기획과 제작
4장: 채널 운영
5장: 캠페인 기획
6장: 콘텐츠 마케팅 실무 팁
    `,
    checklist: [
      '강의 목표를 이해했다',
      '운영 방식을 확인했다',
      '전체 커리큘럼을 파악했다',
    ],
  },
  '1-1': {
    title: '콘텐츠 마케팅의 정의와 역할',
    time: '20분',
    content: `
# 콘텐츠 마케팅의 정의와 역할

## 전통 마케팅 vs 디지털 마케팅 vs 콘텐츠 마케팅

### 전통 마케팅
- 매체(TV, 옥외, 지면) 중심
- 일방향 커뮤니케이션

### 디지털 마케팅
- 타겟 세분화
- 퍼포먼스 중심

### 콘텐츠 마케팅
타겟에게 **유용한 정보/경험**을 제공해서  
**신뢰와 관계를 쌓고**, 결국 **매출로 연결**시키는 활동

## 브랜드 입장에서의 핵심 질문

"우리는 누구에게, 어떤 이야기를, 어떤 포맷으로, 어디에서, 얼마나 자주 보여줄 것인가?"

이 질문에 대한 답을 찾는 것이 콘텐츠 마케터의 핵심 업무입니다.
    `,
    checklist: [
      '콘텐츠 마케팅의 정의를 이해했다',
      '전통/디지털 마케팅과의 차이를 파악했다',
      '브랜드 입장의 핵심 질문을 이해했다',
    ],
  },
  '1-2': {
    title: '콘텐츠 마케터의 주요 업무',
    time: '25분',
    content: `
# 콘텐츠 마케터의 주요 업무

## 채널·형식별 업무

### 블로그/브런치·네이버 포스트
- 아티클 기획·작성
- SEO 최적화
- 썸네일 제작

### 인스타그램·틱톡
- 숏폼 기획
- 필라 콘텐츠 전략
- 피드 전략 수립
- 리그램/UGC 운영

### 유튜브
- 고정 프로그램 기획
- 에피소드 기획
- 썸네일·타이틀 작성
- 댓글 운영

### 뉴스레터
- 발행 컨셉 기획
- 섹션 구성
- CTA 설계

## 공통 업무 플로우

1. **브랜드·타겟 이해** (시장/경쟁사/고객 조사)
2. **전략 설정** (목표·타겟·포지셔닝)
3. **콘텐츠 기획** (주제·포맷·캘린더)
4. **제작/배포** (내부·외주 협업)
5. **성과 측정 및 리포트** (지표·인사이트·리포트)
    `,
    checklist: [
      '채널별 주요 업무를 파악했다',
      '공통 업무 플로우를 이해했다',
      '각 채널의 특성을 이해했다',
    ],
  },
  '1-3': {
    title: '협업하는 팀',
    time: '15분',
    content: `
# 콘텐츠 마케터가 협업하는 팀

## 내부 협업 팀

### 퍼포먼스 마케터
- 광고 집행, 랜딩, 전환 지표 관리
- 콘텐츠와 광고의 시너지 창출

### 브랜드 팀
- 톤앤매너, BI/슬로건 관리
- 대형 캠페인 기획

### 서비스/제품 팀
- 신기능·출시 정보 제공
- 페르소나 정의 협업

### 세일즈/CS
- 고객 질문·불만·장애 포인트 파악
- 콘텐츠 소재 발굴

## 외부 협업 파트너

- **인플루언서·크리에이터**: 콘텐츠 제작, 협업
- **에이전시**: 전문 영역 외주
- **미디어**: 배포 채널 확보
- **프로덕션**: 영상/디자인 제작

## 협업 시 주의사항

- 명확한 브리프 작성
- 일정 관리와 커뮤니케이션
- 데이터 기반 의사결정
    `,
    checklist: [
      '내부 협업 팀의 역할을 이해했다',
      '외부 협업 파트너를 파악했다',
      '협업 시 주의사항을 확인했다',
    ],
  },
  '1-4': {
    title: '실습/과제',
    time: '20분',
    content: `
# 실습/과제

## 미니 미션

자신이 속한 조직 / 혹은 관심 브랜드 하나를 선정하세요.

**"이 브랜드에서 콘텐츠 마케터는 어떤 일을 할 것 같은지"**

3~5줄로 적어보고 공유해봅시다.

## 발표 시 체크 포인트

- 채널 언급만 있는지,
- 아니면 **목표–타겟–채널–지표** 중 몇 가지라도 연결해서 말하는지

## 과제 제출 방법

- 형식: 텍스트 또는 PPT 1-2장
- 제출: 학습 플랫폼 또는 지정된 채널
- 마감: [마감일 지정]

## 다음 단계

이 과제를 통해 브랜드와 콘텐츠 마케터의 역할을 구체적으로 이해할 수 있습니다.
다음 장에서는 전략 수립 방법을 배웁니다.
    `,
    checklist: [
      '미니 미션을 완료했다',
      '목표-타겟-채널-지표를 연결해서 생각할 수 있다',
      '과제를 제출했다',
    ],
  },
  '2-1': {
    title: '비즈니스 목표와 마케팅 목표 연결',
    time: '25분',
    content: `
# 비즈니스 목표와 마케팅 목표 연결

## 비즈니스 목표 예시

- 월 매출 XX억
- 신규 가입자 증가
- 재구매율 상승
- 특정 카테고리 확대

## 마케팅 목표로 번역하는 법

비즈니스 목표를 마케팅 목표로 구체화합니다:

- **인지도**: Reach/Impression
- **유입**: Traffic
- **전환**: Conversion
- **유지/재방문**: Retention

## 콘텐츠 마케팅이 기여하는 지점

### 상단 퍼널: 인지도·관심 형성
- 브랜드 스토리
- 인사이트 콘텐츠

### 중단 퍼널: 비교·설득
- 케이스 스터디
- 리뷰
- How-to 가이드

### 하단 퍼널: 전환·리텐션
- 프로모션
- 후기
- 재구매 유도 콘텐츠

## 목표 설정 프레임워크

SMART 원칙을 활용하세요:
- Specific (구체적)
- Measurable (측정 가능)
- Achievable (달성 가능)
- Relevant (관련성)
- Time-bound (기한)
    `,
    checklist: [
      '비즈니스 목표와 마케팅 목표의 연결을 이해했다',
      '퍼널 단계별 콘텐츠 역할을 파악했다',
      'SMART 목표 설정 방법을 이해했다',
    ],
  },
  '2-2': {
    title: '타겟 정의와 페르소나',
    time: '30분',
    content: `
# 타겟 정의와 페르소나

## 페르소나 정의 시 반드시 포함할 내용

1. **상황**: 어떤 상황에서 어떤 문제를 겪는 사람인지
2. **Buying reason**: 이 브랜드/제품이 왜 필요한지
3. **정보 습득 경로**: 어떤 채널/콘텐츠에서 정보를 얻는지

## 잘못된 페르소나 vs 좋은 페르소나

### 잘못된 예
"20대 여성, 직장인, 서울 거주"

→ 너무 일반적이고, 행동 패턴이나 니즈가 드러나지 않음

### 좋은 예
"혼자 사는 3년 차 직장인, 퇴근 후 집에서 간단한 취미 찾는 사람, YouTube/인스타로 아이디어 탐색"

→ 구체적인 상황, 니즈, 행동 패턴이 명확함

## 페르소나 작성 템플릿

- **기본 정보**: 연령, 직업, 거주지
- **라이프스타일**: 일상 패턴, 관심사
- **페인포인트**: 현재 겪는 문제
- **니즈**: 원하는 것, 해결하고 싶은 것
- **정보 습득**: 주로 사용하는 채널, 콘텐츠 선호도
- **구매 행동**: 구매 결정 요인, 구매 경로

## 실무 팁

- 내부 데이터(고객 리뷰, CS 문의)에서 인사이트 발굴
- 실제 고객 인터뷰를 통해 검증
- 너무 많은 페르소나를 만들지 말고, 핵심 1-2개에 집중
    `,
    checklist: [
      '페르소나 정의 방법을 이해했다',
      '좋은 페르소나와 나쁜 페르소나를 구분할 수 있다',
      '페르소나 작성 템플릿을 활용할 수 있다',
    ],
  },
  '2-3': {
    title: '인사이트 도출을 위한 조사 방법',
    time: '25분',
    content: `
# 인사이트 도출을 위한 조사 방법

## 내부 데이터 활용

### 자사몰/앱 로그
- 유입 채널 분석
- 고객 여정 추적
- 구매·이탈 지점 파악

### 고객 피드백
- CS 문의 패턴
- FAQ 분석
- 리뷰 키워드 분석

## 외부 데이터 활용

### 경쟁사 모니터링
- 경쟁사 SNS/블로그/유튜브 분석
- 메시지, 톤앤매너, 채널 전략 파악
- 차별화 포인트 도출

### 트렌드 분석
- 검색 트렌드 (Google Trends, 네이버 데이터랩)
- 커뮤니티 키워드 (네이버 카페, 디시인사이드 등)
- 소셜 미디어 트렌드

### 레퍼런스 벤치마킹
- 산업별 우수 캠페인 분석
- 구조 차원에서 벤치마킹 (표면적 모방 X)

## 조사 결과 정리 방법

1. **정량 데이터**: 숫자로 보이는 현황
2. **정성 데이터**: 고객의 말, 리뷰, 피드백
3. **인사이트 도출**: 데이터를 해석하여 의미 있는 발견

## 실무 팁

- 조사는 끝이 없으니, 실무 가능한 범위에서 우선순위 설정
- 데이터가 없으면 가설을 세우고, 작은 실험으로 검증
- 정기적으로 업데이트 (분기별, 반기별)
    `,
    checklist: [
      '내부 데이터 활용 방법을 이해했다',
      '외부 데이터 조사 방법을 파악했다',
      '인사이트 도출 방법을 이해했다',
    ],
  },
  '2-4': {
    title: '기본 전략 프레임',
    time: '30분',
    content: `
# 기본 전략 프레임

## STP + 4P + 콘텐츠 전략 연결

### STP (Segmentation / Targeting / Positioning)
- **Segmentation**: 시장 세분화
- **Targeting**: 타겟 선정
- **Positioning**: 포지셔닝

### 4P (Product / Price / Place / Promotion)
- Product: 제품
- Price: 가격
- Place: 유통
- Promotion: 프로모션

### 콘텐츠 마케터의 역할
콘텐츠 마케터는 특히 **Positioning + Promotion** 영역에서 역할이 큽니다.

## 메시지 구조 예시

### Core message (핵심 메시지)
"이 브랜드는 ○○한 상황에서 가장 △△한 선택이다."

### Supporting points (지지 근거)
3가지 근거를 제시:
1. **기능**: 제품/서비스의 기능적 가치
2. **경험**: 사용자 경험, 감성적 가치
3. **사회적 증거**: 리뷰, 후기, 인증 등

## 포지셔닝 맵 활용

경쟁사와의 차별화를 시각화:
- X축: 가격/품질 등 한 가지 차원
- Y축: 또 다른 차원
- 우리 브랜드의 위치를 명확히 표시

## 실무 적용

1. 브랜드 핵심 가치 정의
2. 타겟의 니즈와 연결
3. 경쟁사와의 차별화 포인트 명확화
4. 콘텐츠 메시지로 전달
    `,
    checklist: [
      'STP와 4P 프레임을 이해했다',
      '메시지 구조를 설계할 수 있다',
      '포지셔닝을 명확히 할 수 있다',
    ],
  },
  '2-5': {
    title: '실습/과제',
    time: '30분',
    content: `
# 실습/과제

## 과제 내용

관심 브랜드 하나를 선택해 다음을 작성하세요:

1. **비즈니스/마케팅 목표 가설**
   - 이 브랜드가 추구하는 목표는 무엇일까?
   - 마케팅 목표로는 어떻게 번역될까?

2. **핵심 타겟 페르소나 1명**
   - 구체적인 상황, 니즈, 행동 패턴 포함
   - 정보 습득 경로 명시

3. **한 줄 포지셔닝 문장**
   - "이 브랜드는 [상황]에서 [가치]를 제공하는 [포지션]이다"

## 제출 형식

- PPT 3-5장 또는 문서 2-3페이지
- 각 항목에 대한 근거와 설명 포함

## 평가 기준

- 목표 설정이 구체적이고 측정 가능한가?
- 페르소나가 구체적이고 행동 패턴이 드러나는가?
- 포지셔닝이 명확하고 차별화되는가?

## 다음 단계

전략이 수립되었으니, 이제 콘텐츠를 기획하고 제작하는 방법을 배웁니다.
    `,
    checklist: [
      '비즈니스/마케팅 목표를 설정했다',
      '구체적인 페르소나를 작성했다',
      '명확한 포지셔닝 문장을 만들었다',
    ],
  },
  '3-1': {
    title: '콘텐츠 카테고리 설계',
    time: '25분',
    content: `
# 콘텐츠 카테고리 설계

## 브랜드 콘텐츠 카테고리 4~6개로 나누기

### 예시 카테고리
- **교육형**: How-to, 가이드, 팁
- **영감형**: 스토리, 사례, 동기부여
- **후기·리뷰**: 사용자 경험, 제품 리뷰
- **이벤트/프로모션**: 할인, 이벤트 안내
- **브랜드 스토리**: 브랜드 철학, 팀 소개
- **내부 문화**: 회사 생활, 팀 문화

## 카테고리 설계 기준

### 1. 브랜드 핵심가치와 연결되는가?
각 카테고리가 브랜드의 핵심 가치를 전달하는지 확인

### 2. 최소 3개월 이상 꾸준히 발행 가능한가?
일회성이 아닌 지속 가능한 주제인지 검토

### 3. 타겟에게 명확한 가치가 있는가?
- 정보 제공 (교육형)
- 재미/감동 (영감형)
- 혜택 (프로모션)

## 카테고리 비율 설정

브랜드 목표에 따라 카테고리 비율을 조정:
- 인지도 목표 → 브랜드 스토리, 영감형 비중 증가
- 전환 목표 → 후기, 프로모션 비중 증가
- 교육 목표 → 교육형 콘텐츠 비중 증가

## 실무 팁

- 초기에는 4-5개 카테고리로 시작
- 데이터를 보며 조정 (어떤 카테고리가 반응이 좋은지)
- 계절성, 트렌드를 고려한 유연한 운영
    `,
    checklist: [
      '콘텐츠 카테고리 설계 기준을 이해했다',
      '브랜드 가치와 연결된 카테고리를 만들 수 있다',
      '지속 가능한 카테고리를 설계할 수 있다',
    ],
  },
  '3-2': {
    title: '포맷별 기획 포인트',
    time: '30분',
    content: `
# 포맷별 기획 포인트

## 카드뉴스

### 구조
1. **1장: 훅(문제 제기/공감)**
   - 강렬한 이미지나 질문으로 시작
   - "당신도 이렇게 생각한 적 있나요?"

2. **중간: 정보·근거**
   - 핵심 정보를 단계적으로 전달
   - 3-5장에 나눠서 설명

3. **마지막: 행동 촉구(CTA) 혹은 저장/공유 유도**
   - "더 자세한 내용은 링크에서 확인하세요"
   - "공감되면 공유해주세요"

### 디자인 팁
- 텍스트는 최소화, 이미지 중심
- 한 장에 하나의 메시지
- 브랜드 색상과 톤앤매너 일관성

## 숏폼 (15-60초)

### 구조
- **3초 안에 후킹**: 강력한 이미지/텍스트/사운드
- **15-30초 안에 메시지 전달**: 핵심만 간결하게
- **마지막**: CTA 또는 브랜드 노출

### 포인트
- **자막/텍스트 비중**: 소리 없이도 이해 가능하게
- **리듬**: 빠른 전개로 몰입도 높이기
- **패턴**: 시리즈로 만들면 팔로워 기대감 형성

## 아티클/블로그

### 구조
1. **도입부**: 문제 제기, 공감대 형성
2. **본문**: 3-4개 소제목으로 구성
   - 각 소제목마다 하나의 핵심 포인트
3. **결론·CTA**: 요약 및 다음 행동 유도

### SEO 고려사항
- 검색 키워드와 타겟 질문에 기반
- 제목, 소제목에 키워드 포함
- 내부 링크, 외부 링크 활용

## 뉴스레터

### 섹션 구성 예시
- 인사말
- 주요 소식 (3-5개)
- 추천 콘텐츠
- 이벤트/프로모션
- CTA

### 포인트
- 개인적 톤 (1인칭 사용)
- 가치 있는 정보 제공
- 정기성 유지
    `,
    checklist: [
      '카드뉴스 기획 방법을 이해했다',
      '숏폼 기획 포인트를 파악했다',
      '아티클/블로그 구조를 설계할 수 있다',
    ],
  },
  '3-3': {
    title: '콘텐츠 브리프 작성법',
    time: '25분',
    content: `
# 콘텐츠 브리프 작성법

## 브리프 필수 요소

### 1. 목적 (왜 만드는가)
- 이 콘텐츠의 목표는 무엇인가?
- 어떤 문제를 해결하려는가?

### 2. 타겟 (누구에게)
- 구체적인 페르소나
- 이 콘텐츠를 볼 사람의 특성

### 3. 핵심 메시지 (무엇을 말할 것인가)
- 한 문장으로 요약
- 전달하고 싶은 핵심 가치

### 4. 톤앤매너
- 공식적/캐주얼
- 친근함/전문성
- 유머/진지함

### 5. 포맷 및 채널
- 카드뉴스/숏폼/아티클 등
- 인스타그램/유튜브/블로그 등

### 6. KPI
- 측정할 지표
- 목표 수치 (도달, 참여, 전환 등)

## 실제 실무에서의 브리프 사용

### 디자이너/영상팀과의 커뮤니케이션 도구
- 명확한 브리프로 오해 방지
- 레퍼런스, 무드보드 첨부

### 외주/크리에이터에게 전달하는 기준서
- 브랜드 가이드라인
- 필수 포함 요소
- 금지 사항

## 브리프 템플릿 예시

**콘텐츠 브리프**
- 목적: [ ]
- 타겟: [ ]
- 핵심 메시지: [ ]
- 톤앤매너: [ ]
- 포맷: [ ]
- 채널: [ ]
- KPI: [ ]
- 레퍼런스: [ ]

## 실무 팁

- 브리프는 간결하고 명확하게
- 레퍼런스는 링크나 이미지로 제공
- 피드백은 브리프 기준으로
    `,
    checklist: [
      '브리프 필수 요소를 이해했다',
      '브리프 템플릿을 활용할 수 있다',
      '협업 시 브리프를 활용할 수 있다',
    ],
  },
  '3-4': {
    title: '제작 프로세스와 툴',
    time: '20분',
    content: `
# 제작 프로세스와 툴

## 제작 프로세스

### 1. 기획
- 주제 선정
- 브리프 작성
- 일정 수립

### 2. 스크립트/카피
- 카피 작성
- 문구 확정
- 검수

### 3. 디자인/촬영
- 디자인 시안
- 촬영 (필요시)
- 편집

### 4. 검수
- 문구 검수
- 디자인 검수
- 법적 검토 (필요시)

### 5. 업로드
- 채널별 최적화
- 업로드 및 스케줄링

## 협업 체크리스트

### 카피 확정
- 최종 문구 확정 시점 명확히
- 수정은 이 시점 이전에

### 레이아웃/썸네일 시안 피드백
- 구체적인 피드백 제공
- "예쁘게"가 아닌 "이런 느낌으로" + 레퍼런스

### 레퍼런스 전달 방식
- 링크 모음 (Pinterest, Notion 등)
- 무드보드 (Figma, Canva 등)
- 구체적인 예시 이미지

## 유용한 툴

### 기획/관리
- Notion: 브리프, 일정 관리
- Trello/Asana: 작업 관리

### 디자인
- Canva: 간단한 카드뉴스, 소셜 이미지
- Figma: 디자인 협업
- Photoshop: 전문 편집

### 영상
- CapCut: 모바일 영상 편집
- Premiere Pro: 전문 편집

### 스케줄링
- Buffer, Hootsuite: 소셜 미디어 스케줄링
- Later: 인스타그램 스케줄링
    `,
    checklist: [
      '제작 프로세스를 이해했다',
      '협업 체크리스트를 확인했다',
      '유용한 툴을 파악했다',
    ],
  },
  '3-5': {
    title: '실습/과제',
    time: '30분',
    content: `
# 실습/과제

## 콘텐츠 기획안 1건 작성

앞 장에서 만든 페르소나·목표를 바탕으로  
**카드뉴스 or 숏폼** 중 하나를 선택하여 기획안을 작성하세요.

## 기획서에 반드시 포함할 내용

1. **목적**: 왜 이 콘텐츠를 만드는가
2. **타겟**: 누구에게 보여줄 것인가
3. **핵심 메시지**: 무엇을 말할 것인가
4. **구성안**: 
   - 카드뉴스: 슬라이드별 내용 (5-7장)
   - 숏폼: 씬별 내용 (3-5씬)
5. **톤앤매너**: 어떤 느낌으로
6. **KPI**: 어떤 지표를 측정할 것인가

## 제출 형식

- PPT 5-7장 또는 문서 3-4페이지
- 레퍼런스 이미지 포함 가능

## 평가 기준

- 목적과 타겟이 명확한가?
- 핵심 메시지가 전달되는가?
- 구성이 논리적이고 흥미로운가?
- 실행 가능한가?

## 다음 단계

콘텐츠를 기획했으니, 이제 채널별로 어떻게 운영하는지 배웁니다.
    `,
    checklist: [
      '콘텐츠 기획안을 작성했다',
      '목적, 타겟, 메시지가 명확하다',
      '구성안이 구체적이다',
    ],
  },
  '4-1': {
    title: '주요 채널별 역할 정의',
    time: '25분',
    content: `
# 주요 채널별 역할 정의

## 인스타그램

### 역할
- 브랜딩·참여·이미지 형성
- 커뮤니티 구축

### 특징
- 시각적 콘텐츠 중심
- 스토리, 릴스 등 다양한 포맷
- 해시태그 활용

### 적합한 콘텐츠
- 제품 사진, 라이프스타일
- 숏폼, 리그램
- 이벤트, 프로모션

## 유튜브

### 역할
- 깊이 있는 정보 제공
- 고정 팬층 형성
- SEO 효과

### 특징
- 장시간 시청 가능
- 검색 노출
- 구독자와의 관계 형성

### 적합한 콘텐츠
- 튜토리얼, 리뷰
- 브랜드 스토리
- 시리즈 콘텐츠

## 블로그/브런치

### 역할
- 검색·신뢰 구축
- SEO
- 상세 정보 제공

### 특징
- 텍스트 중심
- 검색 유입
- 백링크 효과

### 적합한 콘텐츠
- How-to 가이드
- 인사이트 아티클
- 케이스 스터디

## 뉴스레터

### 역할
- 관계, 재방문
- 리텐션
- 직접 커뮤니케이션

### 특징
- 개인적 톤
- 정기 발행
- 높은 오픈율

### 적합한 콘텐츠
- 브랜드 소식
- 독점 정보
- 이벤트 안내

## 자사몰/랜딩

### 역할
- 전환
- 구매 결정

### 특징
- 브랜드 통제 가능
- 전환 최적화
- 데이터 수집

### 적합한 콘텐츠
- 제품 상세
- 리뷰, 후기
- 프로모션
    `,
    checklist: [
      '주요 채널의 역할을 이해했다',
      '채널별 특징을 파악했다',
      '채널별 적합한 콘텐츠를 구분할 수 있다',
    ],
  },
  '4-2': {
    title: '채널 운영 전략',
    time: '30분',
    content: `
# 채널 운영 전략

## 채널별 KPI 설정 예시

### 인스타그램
- 팔로워 증가율
- 도달 수 (Reach)
- 저장/공유 수
- 프로필 링크 클릭
- 스토리 조회수

### 유튜브
- 조회수
- 시청 지속 시간
- 구독 전환율
- 좋아요/댓글 수
- 공유 수

### 블로그
- 페이지뷰
- 체류 시간
- 검색 유입
- 백링크 수
- 전환율

### 뉴스레터
- 오픈율
- 클릭률 (CTR)
- 구독자 증가
- 구독 해제율

## 채널 믹스 설계

하나의 캠페인을 여러 채널에서 어떻게 나눠 보여줄지 설계:

### 예시: 신제품 출시 캠페인

1. **티저 단계** (출시 1주 전)
   - 인스타그램: 미공개 이미지
   - 유튜브: 티저 영상

2. **메인 단계** (출시일)
   - 인스타그램: 제품 소개 포스트
   - 유튜브: 제품 리뷰 영상
   - 블로그: 상세 가이드
   - 뉴스레터: 출시 소식

3. **후기/리뷰 단계** (출시 후)
   - 인스타그램: 사용자 후기 리그램
   - 유튜브: 사용자 영상 모음
   - 블로그: 케이스 스터디

## 채널별 콘텐츠 재활용

하나의 콘텐츠를 여러 채널에 맞게 변형:
- 유튜브 영상 → 숏폼으로 편집 → 인스타그램
- 블로그 아티클 → 카드뉴스로 요약 → 인스타그램
- 인스타그램 포스트 → 뉴스레터에 포함

## 실무 팁

- 모든 채널을 운영할 필요는 없음
- 타겟이 주로 사용하는 채널에 집중
- 채널별 특성에 맞게 콘텐츠 변형
- 데이터를 보며 채널별 전략 조정
    `,
    checklist: [
      '채널별 KPI를 설정할 수 있다',
      '채널 믹스를 설계할 수 있다',
      '콘텐츠 재활용 방법을 이해했다',
    ],
  },
  '4-3': {
    title: '콘텐츠 캘린더 운영',
    time: '25분',
    content: `
# 콘텐츠 캘린더 운영

## 월간/주간 캘린더 예시

### 월간 캘린더
- 캠페인 단위 기획
- 주요 이슈 (명절, 시즌 등)
- 출시 일정
- 이벤트 일정

### 주간 캘린더
- 게시물 단위 일정
- 촬영/제작/검수 날짜
- 업로드 시간
- 스토리/릴스 일정

## 운영 시 체크 포인트

### 시즌성 이슈 반영
- 명절 (설날, 추석)
- 입학 시즌
- 연말연시
- 브랜드 고유 시즌

### 브랜드 고유의 시그니처 코너 유지
- 매주 화요일 "팁 데이"
- 매월 첫째 주 "고객 스토리"
- 정기적인 시리즈 콘텐츠

## 캘린더 작성 팁

### 우선순위 설정
1. 필수 콘텐츠 (캠페인, 이벤트)
2. 정기 콘텐츠 (시그니처 코너)
3. 유연한 콘텐츠 (트렌드, 이슈)

### 여유 공간 확보
- 예상치 못한 이슈 대응
- 트렌드 콘텐츠 삽입
- 긴급 프로모션

### 협업 일정 고려
- 제작 리드타임
- 검수 일정
- 외주 일정

## 캘린더 관리 툴

- Google Calendar
- Notion
- Trello
- 전문 툴 (Later, Buffer 등)

## 실무 팁

- 캘린더는 유연하게 운영
- 데이터를 보며 조정 (어떤 요일/시간이 반응이 좋은지)
- 정기적으로 리뷰 (월말, 분기말)
    `,
    checklist: [
      '월간/주간 캘린더를 작성할 수 있다',
      '시즌성 이슈를 반영할 수 있다',
      '캘린더 관리 방법을 이해했다',
    ],
  },
  '4-4': {
    title: '실무 문제와 해결 팁',
    time: '20분',
    content: `
# 실무 문제와 해결 팁

## 자주 생기는 문제들

### 1. 리소스 부족

**문제**: 콘텐츠를 만들 시간/인력이 부족

**해결책**:
- 템플릿화: 자주 쓰는 레이아웃 고정
- 시리즈 형식: 한 번 만든 구조 재사용
- UGC 활용: 사용자 콘텐츠 리그램
- 외주 활용: 전문 영역은 외주

### 2. 콘텐츠 아이디어 고갈

**문제**: 매번 새로운 아이디어가 필요

**해결책**:
- 고객 질문/리뷰/CS에서 소재 발굴
- 타사 레퍼런스를 구조 차원에서 벤치마킹
- 시리즈 콘텐츠로 지속성 확보
- 트렌드를 브랜드에 맞게 재해석

### 3. 반응이 없는 콘텐츠

**문제**: 올렸는데 반응이 없음

**해결책**:
- 데이터 분석: 어떤 콘텐츠가 반응이 좋은지 파악
- A/B 테스트: 제목, 이미지, 시간대 등 테스트
- 타겟 재확인: 정말 타겟이 보는 콘텐츠인가?
- 채널 재검토: 이 채널이 맞는가?

### 4. 협업 어려움

**문제**: 디자이너/영상팀과 소통이 어려움

**해결책**:
- 명확한 브리프 작성
- 레퍼런스, 무드보드 제공
- 구체적인 피드백 (느낌 X, 구체적 요구사항)
- 일정 여유 확보

## 실무 마인드셋

- 완벽보다는 빠른 실행
- 작은 실험으로 검증
- 데이터 기반 의사결정
- 실패를 두려워하지 않기
    `,
    checklist: [
      '자주 생기는 문제를 파악했다',
      '해결 방법을 이해했다',
      '실무 마인드셋을 확인했다',
    ],
  },
  '4-5': {
    title: '실습/과제',
    time: '30분',
    content: `
# 실습/과제

## 1개월 채널 운영안 작성

1개 브랜드 기준, 최소 2개 채널을 선택하여  
주차별로 어떤 카테고리/포맷 콘텐츠를 몇 개 올릴지 표로 정리하세요.

## 포함할 내용

1. **채널 선택 및 역할 정의**
   - 선택한 채널 2개 이상
   - 각 채널의 역할과 목표

2. **월간 캘린더**
   - 주차별 주요 이슈/이벤트
   - 캠페인 일정

3. **주간 콘텐츠 계획**
   - 주차별 게시물 수
   - 카테고리별 비율
   - 포맷 (포스트/스토리/릴스 등)

4. **KPI 설정**
   - 채널별 목표 지표
   - 측정 방법

## 제출 형식

- 엑셀 또는 표 형식
- PPT 5-7장 또는 문서 3-4페이지

## 평가 기준

- 채널 선택이 타겟과 목표에 맞는가?
- 콘텐츠 계획이 현실적인가?
- KPI가 명확한가?

## 다음 단계

일상 운영을 배웠으니, 이제 캠페인을 기획하는 방법을 배웁니다.
    `,
    checklist: [
      '1개월 채널 운영안을 작성했다',
      '주차별 콘텐츠 계획이 구체적이다',
      'KPI를 설정했다',
    ],
  },
  '5-1': {
    title: '캠페인의 정의와 필수 요소',
    time: '25분',
    content: `
# 캠페인의 정의와 필수 요소

## 캠페인의 정의

**"특정 목표를 위해 일정 기간 동안 기획·집중 실행하는  
일련의 마케팅 활동 묶음"**

일상 운영과 달리, 캠페인은 특정 목표를 달성하기 위해 집중적으로 실행하는 활동입니다.

## 캠페인 필수 요소

### 1. Goal (목표)
- 무엇을 달성하려는가?
- 구체적이고 측정 가능한 목표

### 2. Target (타겟)
- 누구에게 보여줄 것인가?
- 페르소나 기반 타겟 정의

### 3. Content (콘텐츠)
- 어떤 메시지를 전달할 것인가?
- 핵심 메시지와 콘텐츠 포맷

### 4. Action (미디어 믹스)
- 어떤 채널을 사용할 것인가?
- 채널별 역할과 일정

### 5. Schedule (일정)
- 언제 시작하고 끝나는가?
- 단계별 일정 (티저-메인-후기)

### 6. Budget (예산)
- 얼마를 쓸 것인가?
- 채널별 예산 배분

## 캠페인 vs 일상 운영

| 구분 | 일상 운영 | 캠페인 |
|------|----------|--------|
| 목표 | 브랜딩, 관계 유지 | 특정 목표 달성 |
| 기간 | 지속적 | 일정 기간 집중 |
| 리소스 | 일정 수준 유지 | 집중 투입 |
| 측정 | 장기 지표 | 단기 목표 지표 |

## 캠페인 기획 시 고려사항

- 목표가 명확한가?
- 타겟이 구체적인가?
- 실행 가능한가?
- 측정 가능한가?
    `,
    checklist: [
      '캠페인의 정의를 이해했다',
      '캠페인 필수 요소를 파악했다',
      '일상 운영과의 차이를 이해했다',
    ],
  },
  '5-2': {
    title: '캠페인 구조 설계',
    time: '30분',
    content: `
# 캠페인 구조 설계

## 상위 구조

### 캠페인 컨셉 / 키 메시지
- 캠페인의 핵심 아이디어
- 한 문장으로 요약 가능한 메시지

### 핵심 혜택/제안
- 프로모션 유무
- 고객이 얻을 수 있는 가치

### 메인 채널과 보조 채널
- 메인 채널: 집중 투입
- 보조 채널: 보조적 역할

## 콘텐츠 레벨 구조

### 1. 인지용 콘텐츠
- **티저 콘텐츠**: 캠페인 시작 전 호기심 유발
- **티징 카피**: 미공개 정보로 관심 유도

### 2. 참여/전환용 콘텐츠
- **메인 페이지**: 캠페인 핵심 메시지
- **상세 설명**: 제품/서비스 상세 정보
- **참여 방법 안내**: 이벤트/프로모션 참여 방법

### 3. 후기/재활용 콘텐츠
- **결과 공유**: 캠페인 성과 공유
- **UGC 하이라이트**: 사용자 콘텐츠 모음
- **리포트형 콘텐츠**: 데이터 기반 인사이트

## 캠페인 타임라인 예시

### 2주 캠페인

**1주차 (티저)**
- 월: 티저 포스트
- 수: 힌트 콘텐츠
- 금: 카운트다운

**2주차 (메인)**
- 월: 메인 콘텐츠 공개
- 수: 상세 정보
- 금: 마감 안내

**3주차 (후기)**
- 결과 공유
- UGC 하이라이트

## 실무 팁

- 단계별로 명확한 목표 설정
- 각 단계의 성과를 측정하며 조정
- 예상치 못한 상황 대비 플랜 B 준비
    `,
    checklist: [
      '캠페인 상위 구조를 설계할 수 있다',
      '콘텐츠 레벨 구조를 이해했다',
      '캠페인 타임라인을 작성할 수 있다',
    ],
  },
  '5-3': {
    title: '사례 분석',
    time: '30분',
    content: `
# 사례 분석

## 분석 프레임워크

각 캠페인을 다음 기준으로 분석합니다:

1. **목표**: 무엇을 달성하려 했는가?
2. **타겟**: 누구에게 보여줬는가?
3. **메시지**: 무엇을 말했는가?
4. **채널**: 어떤 채널을 사용했는가?
5. **혜택**: 고객이 얻을 수 있는 가치는?
6. **결과**: 어떤 성과를 냈는가? (추정 가능하면)

## 산업별 사례

### 이커머스
- 신제품 출시 캠페인
- 시즌 프로모션
- 브랜드 스토리 캠페인

### 앱 서비스
- 앱 출시 캠페인
- 기능 업데이트
- 사용자 유도 캠페인

### 리테일
- 오프라인 이벤트 연계
- 브랜드 콜라보
- 시즌 컬렉션 런칭

## 사례 분석 시 주의사항

### 구조 차원에서 벤치마킹
- 표면적 모방 X
- 왜 이렇게 했는지 이해
- 우리 브랜드에 맞게 재해석

### 데이터 기반 분석
- 추정이 아닌 실제 데이터 확인
- 성공 요인 분석
- 실패 요인도 함께 분석

## 실무 적용

사례 분석을 통해:
1. 좋은 아이디어 발굴
2. 우리 브랜드에 맞게 재해석
3. 작은 실험으로 검증
4. 성과를 보며 확대

## 분석 툴

- 브랜드 공식 SNS 모니터링
- 업계 리포트
- 캠페인 아카이브 사이트
- 트렌드 리포트
    `,
    checklist: [
      '사례 분석 프레임워크를 이해했다',
      '산업별 사례를 파악했다',
      '사례를 우리 브랜드에 적용할 수 있다',
    ],
  },
  '5-4': {
    title: '실습/과제',
    time: '30분',
    content: `
# 실습/과제

## 미니 캠페인 기획안

특정 목표(신규 회원, 앱 설치, 재구매 촉진 등)를 정하고  
캠페인 기획안을 작성하세요.

## 포함할 내용

1. **캠페인 개요**
   - 목표 (Goal)
   - 타겟 (Target)
   - 기간 (Schedule)

2. **캠페인 구조**
   - 컨셉 / 키 메시지
   - 핵심 혜택/제안
   - 메인 채널과 보조 채널

3. **콘텐츠 계획**
   - 단계별 콘텐츠 (티저-메인-후기)
   - 대표 콘텐츠 1-2개 상세 기획

4. **프로모션 방식** (해당 시)
   - 할인, 이벤트 등
   - 참여 방법

5. **KPI 및 측정 방법**
   - 목표 지표
   - 측정 방법

## 제출 형식

- PPT 7-10장 또는 문서 5-6페이지
- 레퍼런스 이미지 포함 가능

## 평가 기준

- 목표가 명확하고 측정 가능한가?
- 타겟이 구체적인가?
- 구조가 논리적인가?
- 실행 가능한가?

## 다음 단계

캠페인을 기획했으니, 이제 실무에서 어떻게 리포트를 작성하고 협업하는지 배웁니다.
    `,
    checklist: [
      '미니 캠페인 기획안을 작성했다',
      '캠페인 구조가 명확하다',
      '실행 가능한 계획이다',
    ],
  },
  '6-1': {
    title: '실무 리포트 작성법',
    time: '25분',
    content: `
# 실무 리포트 작성법

## 주간/월간 리포트 기본 구조

### 1. 핵심 요약 (3줄 요약)
- 이번 주/월의 주요 성과
- 가장 중요한 인사이트 1개
- 다음 액션 플랜

### 2. 주요 지표 변화 (그래프/표)
- 채널별 핵심 지표
- 전주/전월 대비 변화
- 목표 대비 달성률

### 3. 잘 된 점 / 아쉬운 점
- 성과가 좋았던 콘텐츠/캠페인
- 개선이 필요한 부분
- 원인 분석

### 4. 다음 액션 플랜
- 다음 주/월 계획
- 개선 사항
- 리소스 요청 (필요시)

## 지표 해석 시 주의점

### 단순 조회수보다 "행동" 지표를 함께 보기
- 조회수는 높지만 클릭이 없으면?
- 클릭은 많지만 전환이 없으면?
- 각 단계별 전환율 확인

### 맥락 고려
- 외부 요인 (이슈, 트렌드) 반영
- 계절성 고려
- 목표 대비 평가

## 리포트 작성 팁

### 시각화
- 그래프, 차트 활용
- 한눈에 보기 쉽게
- 핵심 지표 강조

### 스토리텔링
- 숫자 나열이 아닌 인사이트 중심
- "왜 이렇게 됐는가" 설명
- "그래서 어떻게 할 것인가" 제시

### 간결함
- 핵심만 전달
- 부가 설명은 별도 첨부
- 이해관계자별 맞춤 리포트

## 리포트 템플릿 예시

**주간 리포트**
1. 핵심 요약
2. 채널별 성과
3. 주요 콘텐츠 분석
4. 다음 주 계획

**월간 리포트**
1. 핵심 요약
2. 목표 달성 현황
3. 채널별 성과 분석
4. 인사이트 및 개선 사항
5. 다음 달 계획
    `,
    checklist: [
      '리포트 기본 구조를 이해했다',
      '지표 해석 방법을 파악했다',
      '리포트 작성 팁을 확인했다',
    ],
  },
  '6-2': {
    title: '협업 커뮤니케이션 팁',
    time: '25분',
    content: `
# 협업 커뮤니케이션 팁

## 디자이너/영상팀과 일할 때

### 텍스트보다 레퍼런스/무드보드로 설명
- "예쁘게" X
- "이런 느낌으로" + 레퍼런스 이미지 O
- 구체적인 요구사항 명시

### 명확한 브리프 제공
- 목적, 타겟, 메시지 명확히
- 필수 포함 요소
- 금지 사항

### 피드백은 구체적으로
- "이 색이 마음에 안 들어요" X
- "브랜드 가이드의 파란색으로 변경해주세요" O
- 느낌이 아닌 구체적 요구사항

## 이해관계자 설득

### "개인 취향"이 아니라 근거로 말하기

**나쁜 예**:
"이게 더 예쁜 것 같아요"

**좋은 예**:
"타겟 페르소나(20대 여성)의 선호 스타일 데이터를 보면, 
미니멀한 디자인보다 컬러풀한 디자인의 참여율이 30% 높습니다.
또한 경쟁사 A사의 유사 캠페인에서도 컬러풀한 스타일이 
좋은 반응을 얻었습니다."

### 데이터, 고객 인사이트, 비즈니스 목표로 말하기
- 개인적 선호 X
- 데이터 기반 O
- 고객 피드백 O
- 비즈니스 목표 연결 O

## 외주/크리에이터와 협업

### 명확한 가이드라인 제공
- 브랜드 가이드라인
- 필수 포함 요소
- 금지 사항
- 톤앤매너

### 일정 관리
- 리드타임 고려
- 중간 체크포인트 설정
- 피드백은 한 번에 모아서

## 실무 팁

- 상대방 입장에서 생각하기
- 감사 표현하기
- 문제 발생 시 빠른 커뮤니케이션
- 정기적인 미팅으로 동기화
    `,
    checklist: [
      '디자이너/영상팀과의 협업 방법을 이해했다',
      '이해관계자 설득 방법을 파악했다',
      '외주 협업 팁을 확인했다',
    ],
  },
  '6-3': {
    title: '커리어·역량 개발 방향',
    time: '25분',
    content: `
# 커리어·역량 개발 방향

## 포트폴리오 구성

### 단순 결과물 나열이 아니라 구조화

**나쁜 예**:
- 콘텐츠 이미지만 나열
- "인스타그램 운영했습니다"

**좋은 예**:
- **문제**: 브랜드 인지도 부족
- **가설**: 타겟이 주로 사용하는 인스타그램에서 브랜드 스토리를 전달하면 인지도가 올라갈 것이다
- **실행**: 페르소나 기반 콘텐츠 기획, 주 3회 포스팅, 스토리 활용
- **결과**: 팔로워 50% 증가, 프로필 링크 클릭 30% 증가
- **인사이트**: 브랜드 스토리 콘텐츠가 가장 높은 참여율을 보였다

### 포트폴리오 구조
1. **문제/목표**: 무엇을 해결하려 했는가
2. **가설**: 어떻게 해결하려 했는가
3. **실행**: 무엇을 했는가
4. **결과**: 어떤 성과를 냈는가 (데이터)
5. **인사이트**: 무엇을 배웠는가

## 꾸준히 보면 좋은 것들

### 브랜드 SNS
- 업계 리더 브랜드 모니터링
- 트렌드 파악
- 좋은 사례 수집

### 뉴스레터
- 업계 인사이트
- 트렌드 리포트
- 케이스 스터디

### 캠페인 아카이브
- 우수 캠페인 분석
- 구조 학습
- 레퍼런스 수집

### 업계 리포트
- 마케팅 트렌드
- 채널별 동향
- 데이터 인사이트

## 역량 개발 방향

### 하드 스킬
- 데이터 분석 능력
- 콘텐츠 제작 도구 활용
- 채널별 운영 노하우

### 소프트 스킬
- 커뮤니케이션
- 문제 해결 능력
- 프로젝트 관리

## 실무 마인드셋

- 호기심 갖기
- 작은 실험 두려워하지 않기
- 데이터 기반 사고
- 지속적인 학습
    `,
    checklist: [
      '포트폴리오 구성 방법을 이해했다',
      '지속적으로 학습할 자료를 파악했다',
      '역량 개발 방향을 확인했다',
    ],
  },
};

export function ChapterViewerPage() {
  const { chapterId, sectionId } = useParams<{ chapterId: string; sectionId?: string }>();
  const navigate = useNavigate();
  const [notes, setNotes] = useState('');
  const [showNotes, setShowNotes] = useState(false);
  const [checkedItems, setCheckedItems] = useState<Record<string, boolean>>({});

  const currentChapter = chapters.find((ch) => ch.id === Number(chapterId));
  const currentSectionId = sectionId || currentChapter?.sections[0]?.id || '1-1';
  const currentContent = sectionContent[currentSectionId] || sectionContent['1-1'];

  const handleChecklistChange = (item: string, checked: boolean) => {
    setCheckedItems({ ...checkedItems, [item]: checked });
  };

  const getNextSection = () => {
    if (!currentChapter) return null;
    const currentIndex = currentChapter.sections.findIndex((s) => s.id === currentSectionId);
    if (currentIndex < currentChapter.sections.length - 1) {
      return currentChapter.sections[currentIndex + 1];
    }
    // 다음 챕터로 이동
    const nextChapterIndex = chapters.findIndex((ch) => ch.id === currentChapter.id);
    if (nextChapterIndex < chapters.length - 1) {
      return chapters[nextChapterIndex + 1].sections[0];
    }
    return null;
  };

  const getPrevSection = () => {
    if (!currentChapter) return null;
    const currentIndex = currentChapter.sections.findIndex((s) => s.id === currentSectionId);
    if (currentIndex > 0) {
      return currentChapter.sections[currentIndex - 1];
    }
    // 이전 챕터로 이동
    const prevChapterIndex = chapters.findIndex((ch) => ch.id === currentChapter.id);
    if (prevChapterIndex > 0) {
      const prevChapter = chapters[prevChapterIndex - 1];
      return prevChapter.sections[prevChapter.sections.length - 1];
    }
    return null;
  };

  const nextSection = getNextSection();
  const prevSection = getPrevSection();

  return (
    <div className="flex h-[calc(100vh-8rem)] gap-4">
      {/* 좌측 목차 (SNB) */}
      <div className="w-64 border-r overflow-y-auto">
        <div className="p-4 space-y-4">
          <div>
            <h3 className="font-semibold mb-2">목차</h3>
            <div className="space-y-2">
              {chapters.map((chapter) => (
                <div key={chapter.id} className="space-y-1">
                  <div
                    className={`font-medium text-sm cursor-pointer hover:text-primary ${
                      chapter.id === Number(chapterId) ? 'text-primary' : ''
                    }`}
                    onClick={() => navigate(`/mentee/chapter/${chapter.id}`)}
                  >
                    {chapter.id}. {chapter.title}
                  </div>
                  <div className="pl-4 space-y-1">
                    {chapter.sections.map((section) => (
                      <div
                        key={section.id}
                        className={`text-sm cursor-pointer hover:text-primary ${
                          section.id === currentSectionId
                            ? 'text-primary font-medium'
                            : 'text-muted-foreground'
                        }`}
                        onClick={() => navigate(`/mentee/chapter/${chapter.id}/${section.id}`)}
                      >
                        {section.completed && <span className="mr-1">✓</span>}
                        {section.title}
                      </div>
                    ))}
                  </div>
                </div>
              ))}
              <div className="pt-4 border-t">
                <h4 className="font-medium text-sm mb-2">부록</h4>
                <div className="pl-4 space-y-1">
                  {appendix.map((item) => (
                    <div
                      key={item.id}
                      className="text-sm text-muted-foreground cursor-pointer hover:text-primary"
                      onClick={() => navigate('/mentee/resources')}
                    >
                      {item.title}
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* 우측 본문 */}
      <div className="flex-1 overflow-y-auto">
        <div className="max-w-4xl mx-auto p-6 space-y-6">
          {/* 헤더 */}
          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <h1 className="text-3xl font-bold">{currentContent.title}</h1>
              <div className="flex items-center gap-2 text-sm text-muted-foreground">
                <Clock className="h-4 w-4" />
                <span>예상 소요 시간: {currentContent.time}</span>
              </div>
            </div>
          </div>

          {/* 본문 콘텐츠 */}
          <Card>
            <CardContent className="p-6">
              <div className="prose prose-sm max-w-none">
                <pre className="whitespace-pre-wrap font-sans">{currentContent.content}</pre>
              </div>
            </CardContent>
          </Card>

          {/* 체크리스트 */}
          <Card>
            <CardHeader>
              <CardTitle>체크리스트</CardTitle>
            </CardHeader>
            <CardContent className="space-y-3">
              {currentContent.checklist.map((item: string) => (
                <div key={item} className="flex items-center space-x-2">
                  <Checkbox
                    id={item}
                    checked={checkedItems[item] || false}
                    onCheckedChange={(checked) => handleChecklistChange(item, checked === true)}
                  />
                  <Label htmlFor={item} className="cursor-pointer">
                    {item}
                  </Label>
                </div>
              ))}
            </CardContent>
          </Card>

          {/* 네비게이션 버튼 */}
          <div className="flex items-center justify-between">
            <Button
              variant="outline"
              onClick={() => {
                if (prevSection) {
                  navigate(`/mentee/chapter/${prevSection.id.split('-')[0]}/${prevSection.id}`);
                }
              }}
              disabled={!prevSection}
            >
              <ArrowLeft className="h-4 w-4 mr-2" />
              이전
            </Button>
            <div className="flex gap-2">
              <Button variant="outline" onClick={() => setShowNotes(!showNotes)}>
                <StickyNote className="h-4 w-4 mr-2" />
                노트 {showNotes ? '닫기' : '열기'}
              </Button>
              <Button
                variant="outline"
                onClick={() => {
                  // 관련 실습으로 이동 (예: 해당 장의 과제)
                  const week = Math.ceil(Number(chapterId) / 1.5);
                  navigate(`/mentee/task/${week}`);
                }}
              >
                <FileText className="h-4 w-4 mr-2" />
                관련 실습으로 이동
              </Button>
            </div>
            <Button
              onClick={() => {
                if (nextSection) {
                  navigate(`/mentee/chapter/${nextSection.id.split('-')[0]}/${nextSection.id}`);
                }
              }}
              disabled={!nextSection}
            >
              다음으로
              <ArrowRight className="h-4 w-4 ml-2" />
            </Button>
          </div>

          {/* 노트 영역 */}
          {showNotes && (
            <Card>
              <CardHeader>
                <CardTitle>개인 메모</CardTitle>
              </CardHeader>
              <CardContent>
                <textarea
                  className="w-full min-h-[200px] p-3 border rounded-md"
                  placeholder="이 섹션에 대한 개인 메모를 작성하세요..."
                  value={notes}
                  onChange={(e) => setNotes(e.target.value)}
                />
              </CardContent>
            </Card>
          )}
        </div>
      </div>
    </div>
  );
}

